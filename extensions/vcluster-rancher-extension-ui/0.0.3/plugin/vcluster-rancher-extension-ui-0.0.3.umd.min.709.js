(("undefined"!==typeof self?self:this)["webpackChunkvcluster_rancher_extension_ui_0_0_3"]=("undefined"!==typeof self?self:this)["webpackChunkvcluster_rancher_extension_ui_0_0_3"]||[]).push([[709],{3796:function(e,t,o){var a=o(43508);a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[e.id,a,""]]),a.locals&&(e.exports=a.locals);var r=o(74825).A;r("3fb77034",a,!0,{sourceMap:!1,shadowMode:!1})},43508:function(e,t,o){"use strict";o.r(t);var a=o(36758),r=o.n(a),s=o(40935),n=o.n(s),i=n()(r());i.push([e.id,"body.theme-light .provider-card[data-v-05c2b09f]{background-color:#fff}body.theme-light .provider-card[data-v-05c2b09f]:hover{background-color:#fff;box-shadow:0 0 10px 0 rgba(0,0,0,.1)}body.theme-light .provider-name[data-v-05c2b09f]{color:#000}.my-tab-component[data-v-05c2b09f]{padding-top:24px}.my-tab-component .title[data-v-05c2b09f]{margin-bottom:16px}.my-tab-component .side-label[data-v-05c2b09f]{position:absolute;top:0;left:0;width:100%;height:4px;background-color:#f27405}.my-tab-component .provider-cards[data-v-05c2b09f]{display:grid;grid-template-columns:repeat(4,1fr);gap:20px;margin-bottom:30px}@media(max-width:1282px){.my-tab-component .provider-cards[data-v-05c2b09f]{grid-template-columns:repeat(3,1fr)}}@media(max-width:982px){.my-tab-component .provider-cards[data-v-05c2b09f]{grid-template-columns:repeat(2,1fr)}}@media(max-width:764px){.my-tab-component .provider-cards[data-v-05c2b09f]{grid-template-columns:repeat(1,1fr)}}.my-tab-component .provider-card[data-v-05c2b09f]{align-self:flex-start;background-color:#1b1b1d;border:1px solid var(--border);height:135px;padding:10px;position:relative;padding:20px;display:flex;align-items:center;cursor:pointer;transition:all .2s}.my-tab-component .provider-card[data-v-05c2b09f]:hover{background-color:#252529;border:1px solid #f27405}.my-tab-component .provider-logo[data-v-05c2b09f]{width:60px;height:60px;margin-right:15px;display:flex;align-items:center;justify-content:center}.my-tab-component .provider-logo img[data-v-05c2b09f]{max-width:100%;max-height:100%;width:60px;height:60px}.my-tab-component .provider-name[data-v-05c2b09f]{font-size:16px;font-weight:500;color:#fff}.my-tab-component .card[data-v-05c2b09f]{background-color:#000;border-radius:4px;box-shadow:0 2px 4px rgba(0,0,0,.1);margin-bottom:20px}.my-tab-component .card .card-title[data-v-05c2b09f]{border-bottom:1px solid #eee;padding:15px 20px}.my-tab-component .card .card-title h2[data-v-05c2b09f]{margin:0;font-size:18px;font-weight:600}.my-tab-component .card .card-content[data-v-05c2b09f]{padding:20px}.my-tab-component .mb-20[data-v-05c2b09f]{margin-bottom:20px}.my-tab-component .row[data-v-05c2b09f]{display:flex;flex-wrap:wrap;margin:0 -10px}.my-tab-component .col[data-v-05c2b09f]{padding:0 10px}.my-tab-component .span-6[data-v-05c2b09f]{width:50%}.my-tab-component .span-12[data-v-05c2b09f]{width:100%}",""]),t["default"]=i},96709:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return V}});var a=o(9274),r=o(30684);const s=e=>((0,a.pushScopeId)("data-v-05c2b09f"),e=e(),(0,a.popScopeId)(),e),n={key:0,class:"my-tab-component"},i=s((()=>(0,a.createElementVNode)("h4",{class:"title"},"Create a vCluster in a Rancher Cluster",-1))),l={class:"provider-cards"},d=s((()=>(0,a.createElementVNode)("div",{class:"side-label"},null,-1))),c=s((()=>(0,a.createElementVNode)("div",{class:"provider-logo"},[(0,a.createElementVNode)("img",{src:r,alt:"Amazon EKS"})],-1))),p=s((()=>(0,a.createElementVNode)("div",{class:"provider-name"},"vCluster",-1))),m=[d,c,p];function h(e,t,o,r,s,d){const c=(0,a.resolveComponent)("VClusterCreateModal");return d.isCreatePage?((0,a.openBlock)(),(0,a.createElementBlock)("div",n,[i,(0,a.createElementVNode)("div",l,[(0,a.createElementVNode)("div",{class:"provider-card item color2",onClick:t[0]||(t[0]=(...e)=>d.openVClusterModal&&d.openVClusterModal(...e))},m)]),s.showModal?((0,a.openBlock)(),(0,a.createBlock)(c,{key:0,$store:o.$store,show:s.showModal,"cluster-options":s.clusterOptions,"version-options":s.versionOptions,"selected-cluster-id":s.selectedClusterId,"selected-version":s.selectedVersion,loading:s.loading,"loading-repos":s.loadingRepos,"on-close":d.closeModal,"onUpdate:selectedClusterId":d.onClusterSelected,"onUpdate:selectedVersion":d.onVersionSelected,onCreate:d.handleCreate},null,8,["$store","show","cluster-options","version-options","selected-cluster-id","selected-version","loading","loading-repos","on-close","onUpdate:selectedClusterId","onUpdate:selectedVersion","onCreate"])):(0,a.createCommentVNode)("",!0)])):(0,a.createCommentVNode)("",!0)}var u=o(86214),f=o(78839),v=o(65359),b=o(35664),g=o(78082),y=o(4364),x={name:"VClusterClusterCreateItem",components:{VClusterCreateModal:f.A},props:{$store:{type:v.il,required:!0}},computed:{isCreatePage(){const e=new URL(window.location.href);return e.pathname.includes("/create")&&!e.searchParams.has("mode")}},data(){return{showModal:!1,clusterOptions:[],versionOptions:[],selectedClusterId:"",selectedVersion:"",loading:!1,loadingRepos:!1,projects:[]}},methods:{async openVClusterModal(){this.showModal=!0;try{await this.loadAllProjects(),await this.fetchClusters(),await this.fetchVersions()}catch(e){y.error("Error initializing vCluster modal data:",e),this.closeModal()}},closeModal(){this.showModal=!1,this.selectedClusterId="",this.selectedVersion=""},onClusterSelected(e){this.selectedClusterId=e},onVersionSelected(e){this.selectedVersion=e},async loadAllProjects(){try{const e=await this.$store.dispatch("management/findAll",{type:b.Mc.PROJECT,opt:{force:!0}});this.projects=e}catch(e){y.error("Failed to load projects:",e),this.projects=[]}},async fetchClusters(){this.loading=!0;try{const e=this.$store.getters["currentStore"](),t=this.$store.getters[`${e}/all`]("management.cattle.io.cluster"),o=t.filter((e=>e.isReady)).map((e=>{const t=this.projects.some((t=>t.spec?.clusterName===e.id));return t?{label:e.nameDisplay,value:e.id}:{label:e.nameDisplay,value:e.id,disabled:!0,tooltip:"No projects available for this cluster"}}));this.clusterOptions=[{label:"-- Select a Cluster --",value:""},...o]}catch(e){y.error("Error fetching clusters:",e)}finally{this.loading=!1}},async fetchVersions(){this.loadingRepos=!0;const e=await this.$store.dispatch("management/findAll",{type:b.W8.CLUSTER_REPO}),t=e.find((e=>(0,g.xb)(e.spec.url,u.HM)));if(t){const e=await t.followLink("index"),o=e.entries.vcluster||[],a=o.filter((e=>{const t=e.version,o=t.split(".");return!(parseInt(o[1])<19)&&(!t.includes("rc")&&!t.includes("beta")&&!t.includes("alpha"))}));this.versionOptions=a.map(((e,t)=>({label:`${e.version} ${0===t?"(default)":""}`,value:e.version}))).sort(((e,t)=>t.value.localeCompare(e.value,void 0,{numeric:!0}))),this.versionOptions.length>0&&(this.selectedVersion=this.versionOptions[0].value),this.loadingRepos=!1}},handleCreate(e){if(!this.selectedClusterId||!this.selectedVersion)return void e(!1);const t=`/${u.KR}/c/${this.selectedClusterId}/create?version=${this.selectedVersion}`;this.$router.push({path:t,query:{version:this.selectedVersion}}),this.closeModal(),e(!0)}}},C=(o(3796),o(47433));const w=(0,C.A)(x,[["render",h],["__scopeId","data-v-05c2b09f"]]);var V=w}}]);
//# sourceMappingURL=vcluster-rancher-extension-ui-0.0.3.umd.min.709.js.map