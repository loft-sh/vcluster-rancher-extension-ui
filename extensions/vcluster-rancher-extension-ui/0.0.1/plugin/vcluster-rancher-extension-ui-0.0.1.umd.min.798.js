(("undefined"!==typeof self?self:this)["webpackChunkvcluster_rancher_extension_ui_0_0_1"]=("undefined"!==typeof self?self:this)["webpackChunkvcluster_rancher_extension_ui_0_0_1"]||[]).push([[798],{57798:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return V}});var a=o(9274),r=o(30684);const s=e=>((0,a.pushScopeId)("data-v-b5ae6c28"),e=e(),(0,a.popScopeId)(),e),n={key:0,class:"my-tab-component"},d=s((()=>(0,a.createElementVNode)("h4",{class:"title"},"Create a vCluster in a Rancher Cluster",-1))),i={class:"provider-cards"},l=s((()=>(0,a.createElementVNode)("div",{class:"side-label"},null,-1))),c=s((()=>(0,a.createElementVNode)("div",{class:"provider-logo"},[(0,a.createElementVNode)("img",{src:r,alt:"Amazon EKS"})],-1))),p=s((()=>(0,a.createElementVNode)("div",{class:"provider-name"},"vCluster",-1))),m=[l,c,p];function u(e,t,o,r,s,l){const c=(0,a.resolveComponent)("VClusterCreateModal");return l.isCreatePage?((0,a.openBlock)(),(0,a.createElementBlock)("div",n,[d,(0,a.createElementVNode)("div",i,[(0,a.createElementVNode)("div",{class:"provider-card item color2",onClick:t[0]||(t[0]=(...e)=>l.openVClusterModal&&l.openVClusterModal(...e))},m)]),s.showModal?((0,a.openBlock)(),(0,a.createBlock)(c,{key:0,$store:o.$store,show:s.showModal,"cluster-options":s.clusterOptions,"version-options":s.versionOptions,"selected-cluster-id":s.selectedClusterId,"selected-version":s.selectedVersion,loading:s.loading,"loading-repos":s.loadingRepos,onClose:l.closeModal,"onUpdate:selectedClusterId":l.onClusterSelected,"onUpdate:selectedVersion":l.onVersionSelected,onCreate:l.handleCreate},null,8,["$store","show","cluster-options","version-options","selected-cluster-id","selected-version","loading","loading-repos","onClose","onUpdate:selectedClusterId","onUpdate:selectedVersion","onCreate"])):(0,a.createCommentVNode)("",!0)])):(0,a.createCommentVNode)("",!0)}var h=o(86214),v=o(20352),b=o(65359),g=o(35664),f=o(78082),x=o(4364),y={name:"VClusterClusterCreateItem",components:{VClusterCreateModal:v.A},props:{$store:{type:b.il,required:!0}},computed:{isCreatePage(){return this.$route.path.includes("/create")}},data(){return{showModal:!1,clusterOptions:[],versionOptions:[],selectedClusterId:"",selectedVersion:"",loading:!1,loadingRepos:!1}},methods:{openVClusterModal(){this.showModal=!0,this.fetchClusters(),this.fetchVersions()},closeModal(){this.showModal=!1},onClusterSelected(e){this.selectedClusterId=e},onVersionSelected(e){this.selectedVersion=e},async fetchClusters(){this.loading=!0;try{const e=this.$store.getters["currentStore"](),t=this.$store.getters[`${e}/all`]("management.cattle.io.cluster");this.clusterOptions=t.filter((e=>e.isReady)).map((e=>({label:e.nameDisplay,value:e.id,disabled:!e.isReady})))}catch(e){x.error("Error fetching clusters:",e)}finally{this.loading=!1}},async fetchVersions(){this.loadingRepos=!0;const e=await this.$store.dispatch("management/findAll",{type:g.W8.CLUSTER_REPO}),t=e.find((e=>(0,f.x)(e.spec.url,h.HM)));if(t){const e=await t.followLink("index"),o=e.entries.vcluster||[],a=o.filter((e=>{const t=e.version,o=t.split(".");return!(parseInt(o[1])<19)&&(!t.includes("rc")&&!t.includes("beta")&&!t.includes("alpha"))}));this.versionOptions=a.map(((e,t)=>({label:`${e.version} ${0===t?"(default)":""}`,value:e.version}))).sort(((e,t)=>t.value.localeCompare(e.value,void 0,{numeric:!0}))),this.versionOptions.length>0&&(this.selectedVersion=this.versionOptions[0].value),this.loadingRepos=!1}},handleCreate(e){if(!this.selectedClusterId||!this.selectedVersion)return void e(!1);const t=`/${h.KR}/c/${this.selectedClusterId}/create?version=${this.selectedVersion}`;this.$router.push({path:t,query:{version:this.selectedVersion}}),this.closeModal(),e(!0)}}},C=(o(87415),o(47433));const w=(0,C.A)(y,[["render",u],["__scopeId","data-v-b5ae6c28"]]);var V=w},59319:function(e,t,o){"use strict";o.r(t);var a=o(36758),r=o.n(a),s=o(40935),n=o.n(s),d=n()(r());d.push([e.id,"body.theme-light .provider-card[data-v-b5ae6c28]{background-color:#fff}body.theme-light .provider-card[data-v-b5ae6c28]:hover{background-color:#fff;box-shadow:0 0 10px 0 rgba(0,0,0,.1)}body.theme-light .provider-name[data-v-b5ae6c28]{color:#000}.my-tab-component[data-v-b5ae6c28]{padding-top:24px}.my-tab-component .title[data-v-b5ae6c28]{margin-bottom:16px}.my-tab-component .side-label[data-v-b5ae6c28]{position:absolute;top:0;left:0;width:100%;height:4px;background-color:#f27405}.my-tab-component .provider-cards[data-v-b5ae6c28]{display:grid;grid-template-columns:repeat(4,1fr);gap:20px;margin-bottom:30px}@media(max-width:1282px){.my-tab-component .provider-cards[data-v-b5ae6c28]{grid-template-columns:repeat(3,1fr)}}@media(max-width:982px){.my-tab-component .provider-cards[data-v-b5ae6c28]{grid-template-columns:repeat(2,1fr)}}@media(max-width:764px){.my-tab-component .provider-cards[data-v-b5ae6c28]{grid-template-columns:repeat(1,1fr)}}.my-tab-component .provider-card[data-v-b5ae6c28]{align-self:flex-start;background-color:#1b1b1d;border:1px solid var(--border);height:135px;padding:10px;position:relative;padding:20px;display:flex;align-items:center;cursor:pointer;transition:all .2s}.my-tab-component .provider-card[data-v-b5ae6c28]:hover{background-color:#252529;border:1px solid #f27405}.my-tab-component .provider-logo[data-v-b5ae6c28]{width:60px;height:60px;margin-right:15px;display:flex;align-items:center;justify-content:center}.my-tab-component .provider-logo img[data-v-b5ae6c28]{max-width:100%;max-height:100%;width:60px;height:60px}.my-tab-component .provider-name[data-v-b5ae6c28]{font-size:16px;font-weight:500;color:#fff}.my-tab-component .card[data-v-b5ae6c28]{background-color:#000;border-radius:4px;box-shadow:0 2px 4px rgba(0,0,0,.1);margin-bottom:20px}.my-tab-component .card .card-title[data-v-b5ae6c28]{border-bottom:1px solid #eee;padding:15px 20px}.my-tab-component .card .card-title h2[data-v-b5ae6c28]{margin:0;font-size:18px;font-weight:600}.my-tab-component .card .card-content[data-v-b5ae6c28]{padding:20px}.my-tab-component .mb-20[data-v-b5ae6c28]{margin-bottom:20px}.my-tab-component .row[data-v-b5ae6c28]{display:flex;flex-wrap:wrap;margin:0 -10px}.my-tab-component .col[data-v-b5ae6c28]{padding:0 10px}.my-tab-component .span-6[data-v-b5ae6c28]{width:50%}.my-tab-component .span-12[data-v-b5ae6c28]{width:100%}",""]),t["default"]=d},87415:function(e,t,o){var a=o(59319);a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[e.id,a,""]]),a.locals&&(e.exports=a.locals);var r=o(74825).A;r("0c38a86b",a,!0,{sourceMap:!1,shadowMode:!1})}}]);
//# sourceMappingURL=vcluster-rancher-extension-ui-0.0.1.umd.min.798.js.map